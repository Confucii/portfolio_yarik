<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Portfolio of Yarik - 3D, Web Design, and Photography">
  <title>Yarik's Portfolio</title>
  <link rel="stylesheet" href="/styles.css">
</head>
<body>
  <!-- Header -->
  <header>
    <nav class="container">
      <div class="logo">
        <img src="/public/logo.svg" alt="Logo" id="logo-img">
        <span>Portfolio</span>
      </div>
      <button class="menu-toggle" aria-label="Toggle menu">â˜°</button>
      <ul class="nav-links">
        <li><a href="/" class="active">Home</a></li>
        <li><a href="/about.html">About</a></li>
      </ul>
    </nav>
  </header>

  <!-- Hero Section -->
  <section class="hero">
    <div class="container">
      <h1>Welcome to My Portfolio</h1>
      <p>Explore my creative work across various disciplines</p>
    </div>
  </section>

  <!-- Categories Section -->
  <section class="categories">
    <div class="container">
      <h2 class="section-title">Browse by Category</h2>
      <div class="category-grid" id="category-grid">
        <!-- Categories will be loaded here by JavaScript -->
        <div class="loading">Loading categories...</div>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer>
    <div class="container">
      <p>&copy; <span id="year"></span> Yarik. All rights reserved.</p>
    </div>
  </footer>

  <script type="module">
    // Mobile menu toggle
    const menuToggle = document.querySelector('.menu-toggle');
    const navLinks = document.querySelector('.nav-links');

    menuToggle.addEventListener('click', () => {
      navLinks.classList.toggle('active');
    });

    // Load categories
    async function loadCategories() {
      try {
        const response = await fetch('/data.json');
        if (!response.ok) {
          throw new Error('Failed to load portfolio data');
        }

        const data = await response.json();
        const categoryGrid = document.getElementById('category-grid');

        if (data.categories.length === 0) {
          categoryGrid.innerHTML = '<p class="error">No categories found</p>';
          return;
        }

        // Clear loading message
        categoryGrid.innerHTML = '';

        // Create category cards
        data.categories.forEach(category => {
          const card = document.createElement('a');
          card.href = `/category.html?name=${encodeURIComponent(category.name)}`;
          card.className = 'category-card fade-in';
          card.innerHTML = `
            <h3>${category.displayName}</h3>
            <p class="project-count">${category.projectCount} ${category.projectCount === 1 ? 'project' : 'projects'}</p>
          `;
          categoryGrid.appendChild(card);
        });
      } catch (error) {
        console.error('Error loading categories:', error);
        document.getElementById('category-grid').innerHTML = `
          <div class="error">
            <p>Failed to load categories. Please try again later.</p>
            <p><small>${error.message}</small></p>
          </div>
        `;
      }
    }

    // Hide logo if it doesn't exist
    const logoImg = document.getElementById('logo-img');
    logoImg.addEventListener('error', () => {
      logoImg.style.display = 'none';
    });

    // Set current year
    document.getElementById('year').textContent = new Date().getFullYear();

    // Initialize
    loadCategories();
  </script>
</body>
</html>
